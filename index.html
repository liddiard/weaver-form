<!DOCTYPE html>
<html ng-app="order">
<head>
	<link href='https://fonts.googleapis.com/css?family=Lato:300,400,700,400italic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="css/form.css">
    <!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0/angular.min.js"></script>
	<script type="text/javascript" src="js/app.js"></script>
</head>
<body ng-controller="FormController as form">
	<header>
		<img id="banner" src=""/>
		<h1>{{form.options.style}} Order Form</h1>
		<div class="actions">
			<a class="button" href="#">Customer Info</a>
			<a class="button" href="#">Save</a>
		</div>
		<nav>
			<ul>
				<li ng-click="form.selectSection(0)" ng-class="{ active: form.isSelected(0) }" id="dimensions">Dimensions &amp; Layout</li>
                <li ng-repeat="(section, content) in form.additions" ng-class="{ active: form.isSelected($index+1) }">{{section}}</li>
			</ul>
		</nav>
	</header>
	<aside class="price">
		<h1>Price Calculator</h1>
		<h2 class="customer">Customer: John Doe</h2>
		<h2 class="barn-type">{{form.displaySize(form.options.size)}} {{form.options.style}} {{form.options.feature}}</h2>
		<h3 ng-show="form.base_price" class="base-price">Base Price: {{form.base_price | currency:"$":0}}</h3>
		<h4>Options</h4>
        <div ng-repeat="(section, content) in form.options.additions">
            <h5>{{section}}</h5>
            <div class="option" ng-repeat="(subsection, subcontent) in content">
                <span class="quantity">1</span>
                <span class="name">{{subcontent.name}}</span>
                <span class="price">{{subcontent.price | currency:"$"}}</span>
            </div>
        </div>
		<div class="totals">
			<h2>Totals</h2>
			<span class="options-subtotal">
				Options Subtotal <span class="price">$456.00</span>
			</span>
			<span class="delivery">
				Delivery <span class="price">$90.00</span>
			</span>
			<span class="subtotal-before-tax">
				Subtotal Before Tax <span class="price">$3,895.00</span>
			</span>
			<span class="tax">
				Tax (6.75%) <span class="price">$475.00</span>
			</span>
			<span class="total">
				<strong>Total</strong> <span class="price">{{form.base_price | currency:"$"}}</span>
			</span>
		<div>
	</aside>

	<form id="main">
        {{ form.options.additions }}
	    <!-- main content here -->
	    <section ng-include="'views/dimensions.html'" ng-show="form.isSelected(0)" id="dimensions">
	    </section>

        <section ng-repeat="(section, content) in form.additions" ng-show="form.isSelected($index+1)">
            <h2>{{ section }}</h2>
            <div class="form-element" ng-repeat="(subsection, subcontent) in content">
                <h3>{{subsection}}</h3>

                <!-- checkbox -->
                <div class="checkbox-option" ng-if="subcontent[0].form_type === 'checkbox'">
                    <input id="{{subcontent[0].name}}" name="{{subsection}}" ng-value="{{subcontent[0]}}" ng-model="form.options.additions[section][subsection]" type="checkbox"/>
                    <label for="{{subcontent[0].name}}">
                        {{subcontent[0].name}}
                        <span class="unit">[{{subcontent[0].price | currency:"$"}}]</span>
                    </label>
                </div>
                
                <!-- radio button -->
                <div class="radio-option" ng-if="subcontent[0].form_type === 'radio'" ng-repeat="option in subcontent[0].options">
                    <input id="{{option.name}}" name="{{subsection}}" ng-value="{{option}}" type="radio" ng-model="form.options.additions[section][subsection]"/>
                    <label for="{{option.name}}">
                        {{option.name}}
                        <span class="unit">[{{option.price | currency:"$"}}]</span>
                    </label>
                </div>

                <!-- number range -->
                <div class="number-option" ng-if="subcontent[0].form_type === 'numeric'">
                    <input type="number"/>
                    <span class="unit">
                        [{{subcontent[0].price | currency:"$"}}<span ng-if="subcontent[0].pricing_type === 'each'">/ea.</span>]
                    </span>
                    <div class="radio-option" ng-if="subcontent[0].options.length" ng-repeat="option in subcontent[0].options">
                        <input id="{{option.name}}" name="{{subsection}}" type="radio"/>
                        <label for="{{option.name}}">
                            {{option.name}}
                            <span class="unit">[{{option.price | currency:"$"}}]</span>
                        </label>
                    </div>
                </div>

                <!-- dropdown -->
                <div class="select-option" ng-if="subcontent[0].form_type === 'select'">
                    <select name="{{subsection}}" ng-model="form.options.additions[section][subsection]" ng-options="option.name for option in subcontent[0].options">
                        <option disabled value="">-- make a selection --</option>
                    </select>
                </div>

            </div>
            <button ng-click="form.nextSection()" class="next">Next Section</button>
        </section>
    </form>

</body>
</html>
